<!DOCTYPE html>
{% load bootstrap5 %}
{% load i18n %}
{% load custom_tags %}
{# Load CSS and JavaScript #}
{% bootstrap_css %}
{% bootstrap_javascript %}

{# Display django.contrib.messages as Bootstrap alerts #}
{% bootstrap_messages %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Django-chat</title>
    {% include 'links&cdns.html' %}
</head>
<script>
    var navcount=0
  </script>
<body>  
   {% include 'nav.html' %}
   {% block content %}
   {% endblock content %}
   {% comment %} For Online purposes {% endcomment %}
   <script>    
    const OnlineUsersSocket=new WebSocket(
      'ws://'
      + window.location.host
      + '/ws/'      
      + 'onlineusers/'
  );
    
  
  OnlineUsersSocket.onclose = function(e) {
      console.error('Chat socket closed unexpectedly');
  };
  </script>
  {% comment %} For message notification purposes {% endcomment %}
  <script>
    var userforgroup=`{{request.user.username | remove_unnecessary}}`
    var user=`{{request.user}}`
    const NotificationSocket=new WebSocket(
      'ws://'
      + window.location.host
      + '/ws/'      
      +userforgroup
      +'/'
      +user
      + '/notify/'
  );
    
  
    NotificationSocket.onclose = function(e) {
      console.error('Chat socket closed unexpectedly');
  };
  NotificationSocket.onmessage = function(e) {
    var data = JSON.parse(e.data);      
    console.log(data)    
};
  </script>
</body>
</html>